<h1 matDialogTitle>{{data.title}}</h1>

<form [formGroup]="itemForm" (ngSubmit)="submit()">
  <input type="file" #fileChooser style="visibility: hidden" (change)="onProfilePictureChange($event)"/>
  <div fxLayout="row wrap" fxLayout.lt-sm="column">

    <div fxFlex="50" class="pr-1">
      <ng-container *ngIf="!itemForm.profilePicture else previewProfile">
        <ng-container *ngIf="!fileChooser.value else selected">
          <div class="employee-avatar mt-1 mb-1 p-1 rounded" fxLayout="column wrap" fxLayoutAlign="center center">
            <div fxLayout="row wrap" fxLayoutAlign="space-evenly center" (click)="fileChooser.click()">
              <mat-icon role="img" aria-hidden="true">photo_camera</mat-icon>
              <span>Upload <br/>picture</span>
            </div>
          </div>
        </ng-container>

        <ng-template #selected>
          <div class="employee-avatar mt-1 mb-1 p-1 rounded" fxLayout="column wrap" fxLayoutAlign="center center">
            <img [src]="localPath" (click)="fileChooser.click()"/>
          </div>
          <div class="text-center">
            <button mat-raised-button (click)="uploadProfilePicture($event)" class="mat-primary mr-1" >Upload</button>
            <button mat-raised-button (click)="cancelProfilePicture($event)">Cancel</button>
          </div>
        </ng-template>
      </ng-container>

      <ng-template #previewProfile>
        <ng-container *ngIf="!fileChooser.value else selected">
          <ng-container fxLayout="row wrap" fxLayoutAlign="space-evenly center" (click)="fileChooser.click()">
            <img [src]="baseURL + itemForm.profilePicture" (click)="fileChooser.click()"/>
          </ng-container>
        </ng-container>

        <ng-template #selected>
          <img [src]="localPath" (click)="fileChooser.click()"/>
          <div class="text-center">
            <button mat-raised-button (click)="uploadProfilePicture($event)" class="mat-primary mr-1" >Upload</button>
            <button mat-raised-button (click)="cancelProfilePicture($event)">Cancel</button>
          </div>
        </ng-template>
      </ng-template>
    </div>

    <div fxFlex="50" class="pr-1" fxLayout="column wrap" fxLayoutAlign="center center">
      <mat-form-field class="full-width">
        <input
          matInput
          name="firstName"
          formControlName="firstName"
          placeholder="First Name">
      </mat-form-field>

      <mat-form-field class="full-width">
        <input
          matInput
          name="lastName"
          formControlName="lastName"
          placeholder="Last Name">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <input
          matInput
          type="email"
          name="email"
          formControlName="email"
          placeholder="Email">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <input
          matInput
          name="mobile"
          formControlName="mobile"
          placeholder="Mobile/Phone">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <input
          matInput
          name="placeOfBirthCountry"
          formControlName="placeOfBirthCountry"
          placeholder="City of Birth">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <input
          matInput
          name="placeOfBirthCity"
          formControlName="placeOfBirthCity"
          placeholder="Contry of Birth">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <input
          matInput
          name="nameOfAgency"
          formControlName="nameOfAgency"
          placeholder="Name of Agency">
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pr-1">
      <mat-form-field class="full-width">
        <mat-label>Spoken Language</mat-label>
        <mat-select formControlName="spokenLanguages" multiple>
          <mat-option *ngFor="let language of languages" [value]="language">{{language}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div fxFlex="50"  class="pt-1 pr-1">
      <mat-slide-toggle formControlName="isPerson">Is Person?</mat-slide-toggle>
    </div>

    <div fxFlex="100" class="mt-1">
      <button mat-raised-button color="primary" [disabled]="itemForm.invalid" type="submit" (submit)="submit()">SAVE</button>
      <span fxFlex></span>
      <button mat-button color="warn" type="button" (click)="dialogRef.close(false)">Cancel</button>
    </div>
  </div>
</form>
